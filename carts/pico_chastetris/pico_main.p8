pico-8 cartridge // http://www.pico-8.com
version 41
__lua__
#include pico_chastetris.lua
#include pico_chastegame.lua

width = 128;
height = 128;

block_size=flr(height/grid_height);
grid_offset_x=flr( (width-(20/2*block_size)) / 2 );
border_size=1;

x=64;y=64;r=8;

function _init()
 game_loop_init();
 gamefunc=game_loop;
end


function _update()
 if (btnp(0)) then
  tetris_move_left();
 end
 if (btnp(1)) then
  tetris_move_right();
 end
 if (btnp(2)) then
  --tetris_move_up();
  block_hold();
 end
 if (btnp(3)) then
  tetris_move_down();
 end
 if (btnp(4)) then
  block_rotate_left_basic();
 end
 if (btnp(5)) then
  block_rotate_right_basic();
 end
end
 
function _draw();
 cls(0); 
 gamefunc(); 
end

__label__
07707070777007707770777000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70007070707070000700700000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70007770777077700700770000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70007070707000700700700000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
07707070707077000700777000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
7770777077700770000000000000000005500000000000000000cccccccccccccccccccccccc0000000000000000005500000000000000000000000000000000
0700707007007000000000000000000005500000000000000000cccccccccccccccccccccccc0000000000000000005500000000000000000000000000000000
0700770007007770000000000000000005500000000000000000cccccccccccccccccccccccc0000000000000000005500000000000000000000000000000000
0700707007000070000000000000000005500000000000000000cccccccccccccccccccccccc0000000000000000005500000000000000000000000000000000
0700707077707700000000000000000005500000000000000000cccccccccccccccccccccccc0000000000000000005500000000000000000000000000000000
0000000000000000000000000000000005500000000000000000cccccccccccccccccccccccc0000000000000000005500000000000000000000000000000000
77707770077007700000777000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70700700700070700000707000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
77700700700070707770777000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70000700700070700000707000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70007770077077000000777000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
07700770077077707770000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70007000707070707000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
77707000707077007700000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00707000707070707000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
77000770770070707770000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
77700000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70700000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70700000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70700000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
77700000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70007770770077700770000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70000700707070007000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70000700707077007770000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70000700707070000070000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
77707770707077707700000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
77700000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70700000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70700000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70700000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
77700000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70700770700077000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70707070700070700000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
77707070700070700000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70707070700070700000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70707700777077700000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
77000770770077700000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70707070707070000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70707070707077000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70707070707070000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
70707700707077700000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055000000000000000000000000000000000000000000000000000000000005500000000000000000000000000000000
00000000000000000000000000000000055555555555555555555555555555555555555555555555555555555555555500000000000000000000000000000000
00000000000000000000000000000000055555555555555555555555555555555555555555555555555555555555555500000000000000000000000000000000
00000000000000000000000000000000055555555555555555555555555555555555555555555555555555555555555500000000000000000000000000000000
00000000000000000000000000000000055555555555555555555555555555555555555555555555555555555555555500000000000000000000000000000000
00000000000000000000000000000000055555555555555555555555555555555555555555555555555555555555555500000000000000000000000000000000
00000000000000000000000000000000055555555555555555555555555555555555555555555555555555555555555500000000000000000000000000000000
00000000000000000000000000000000055555555555555555555555555555555555555555555555555555555555555500000000000000000000000000000000
00000000000000000000000000000000055555555555555555555555555555555555555555555555555555555555555500000000000000000000000000000000

